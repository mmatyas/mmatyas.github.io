function e(e){let n=!1;const t=[];for(;!n;){let o=127&e;(e>>=7)?o+=128:n=!0,t.push(o)}return new Uint8Array(t)}function n(n,t){const o=t.encode(n),c=e(o.length),l=new Uint8Array(c.length+o.length);return l.set(c,0),l.set(o,c.length),l}function t(e,t,o){const c=n(e,o),l=n(t,o),r=new Uint8Array(2+c.length+l.length);return r[0]=10,r.set(c,1),r[1+c.length]=18,r.set(l,2+c.length),r}function o(n){const o=new FileReader;o.onload=()=>{try{const c=JSON.parse(o.result),l=function(n){const o=new TextEncoder,c=[];for(const[l,r]of n){const n=t(l,r,o),s=e(n.length),i=new Uint8Array(1+s.length+n.length);i[0]=10,i.set(s,1),i.set(n,1+s.length),c.push(i)}return c}(new Map(Object.entries(c))),r=function(e){const n=e.reduce(((e,n)=>e+n.length),0),t=new Uint8Array(n);let o=0;for(const n of e)t.set(n,o),o+=n.length;return t}(l);!function(e,n){const t=document.createElement("a"),o=new Blob([e],{type:"application/octet-stream"});t.href=window.URL.createObjectURL(o),t.download=n,t.click()}(r,n.name.replace(".json",".locbin"))}catch(e){alert("Hibás JSON fájl!\n"+e.message)}},o.readAsText(n)}window.onload=()=>{const e=document.getElementById("locbin");document.getElementById("convert").onclick=()=>{e.files&&e.files.length>0&&o(e.files[0])}};
